PhÃ¢n loáº¡i entity trong product-service
A. Tenant-owned entities (Tenant Schema)

ğŸ‘‰ Gáº¯n cháº·t vá»›i nghiá»‡p vá»¥ cá»§a 1 tenant cá»¥ thá»ƒ
Product (TenantProduct)
Chá»‰ chá»©a thÃ´ng tin â€œÄ‘á»‹nh danh â€“ quáº£n trá»‹â€ mÃ  tenant kiá»ƒm soÃ¡t.

Thuá»™c tÃ­nh nÃªn cÃ³
name
internal_code
sku (tenant-defined)
barcode
qr_code
gtin
brand (reference)
status (active, archived,â€¦)
tenant_id (logic, khÃ´ng nháº¥t thiáº¿t lÃ  FK váº­t lÃ½)

â›” KHÃ”NG nÃªn chá»©a:
price history
dá»¯ liá»‡u crawl
domain / marketplace

ğŸ“Œ LÃ½ do:
Tenant A vÃ  Tenant B cÃ³ thá»ƒ:
quáº£n lÃ½ cÃ¹ng má»™t sáº£n pháº©m váº­t lÃ½
nhÆ°ng cÃ¡ch Ä‘áº·t tÃªn, SKU, phÃ¢n loáº¡i khÃ¡c nhau

B. Shared entities (Public Schema)
ğŸ‘‰ Dá»¯ liá»‡u cross-tenant, dÃ¹ng chung, cÃ³ thá»ƒ ráº¥t lá»›n
1ï¸âƒ£ Canonical Product (SharedProduct)

ÄÃ¢y lÃ  â€œproduct váº­t lÃ½ / product chuáº©n hoÃ¡â€
Má»¥c tiÃªu
Gá»™p nhiá»u tenant product â†’ 1 sáº£n pháº©m chuáº©n
LÃ  trá»¥c liÃªn káº¿t lá»‹ch sá»­ giÃ¡ & URL

Thuá»™c tÃ­nh
id (global)

gtin / ean / upc

manufacturer

normalized_name

specs_hash (optional)

created_at

ğŸ“Œ TenantProduct â†’ map tá»›i SharedProduct

2ï¸âƒ£ Product URL (SharedProductURL)

Má»™t sáº£n pháº©m cÃ³ nhiá»u URL (Amazon, Rakuten, Shopee, website hÃ£ngâ€¦)

Thuá»™c tÃ­nh

product_id (SharedProduct)

domain

full_url

marketplace_type

currency

is_active

meta (json: region, seller, variantâ€¦)

ğŸ“Œ KhÃ´ng thuá»™c tenant
â†’ VÃ¬ URL marketplace lÃ  dá»¯ liá»‡u khÃ¡ch quan

3ï¸âƒ£ Price History (SharedPriceHistory)

Dá»¯ liá»‡u time-series, volume lá»›n, chá»‰ Ä‘á»c

Thuá»™c tÃ­nh

product_url_id

price

currency

recorded_at

source (crawler, api, manualâ€¦)

ğŸ“Œ Share 100%
ğŸ“Œ CÃ³ thá»ƒ dÃ¹ng partition / hypertable (TimescaleDB)