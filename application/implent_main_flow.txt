1. FLOW C·ªê ƒê·ªäNH (KH√îNG C·∫§U H√åNH TH·ª® T·ª∞)


        [Signup]
        ‚Üì
        [Verify Email]
        ‚Üì
        [Signin]
        ‚Üì
        [Create Tenant(Project)]
        ‚Üì
        [Resolve Subscription]
        ‚Üì
        [Select Plan]
        ‚Üì
        [Quote / Payment]
        ‚Üì
        [Activate Tenant]
    
2. RULE C·∫§U H√åNH (B·∫¨T/T·∫ÆT, CH·ªåN NH√ÅNH)
    fule config ch·ªâ ƒë∆∞·ª£c c·∫•u h√¨nh qua admin django adapter, kh√¥ng ƒë·ªïi code flow

    2.1 Signup
    Flow: nh·∫≠n user
    Rule config:

        allow_signup: true/false
        domain_whitelist
        captcha_required: true/false
    ‚õî Kh√¥ng ƒë·ªïi logic t·∫°o user

    2.2 Verify Email
    Flow: g·ª≠i email x√°c th·ª±c
    Rule config:

        require_email_verify: true/false
        verify_expire_minutes: time_in_minutes
        allow_signin_before_verify: true/false (r·∫•t hay d√πng)
    üëâ SaaS l·ªõn cho signin nh∆∞ng h·∫°n quy·ªÅn

    2.3 Signin

    Flow: c·∫•p session/token
        Rule config:
            max_session
            mfa_required (theo plan / tenant)
            readonly_mode: true/false
        
    2.4 Create Tenant (Project)

    Flow: t·∫°o tenant
        Rule config:
            auto_create_tenant: true/false
            max_tenant_per_user
            default_tenant_status: pending | inactive

    2.5 Resolve Subscription

    Flow: x√°c ƒë·ªãnh tr·∫°ng th√°i subscription
    Rule config:
            allow_free_tier
            allow_trial
            trial_days
            grace_period_days

    üëâ ƒê√¢y l√† ƒëi·ªÉm quy·∫øt ƒë·ªãnh c√≥ v√†o billing hay kh√¥ng
    2.6 Select plan

    flow: g√°n plan
    rule config:
            default plan
            allow_plan_change: true/false
            allowed_plans: (per region / tenant type)

    Admin kh√¥ng t·∫°o logic plan, ch·ªâ ch·ªçn option

    2.7 Quote / Payment

    Flow: billing
    Rule config:
            billing_enabled
            payment_required_for_activation
            billing_mode: quote | direct_charge
            allowed_providers

    üëâ Billing flow v·∫´n c·ªë ƒë·ªãnh

    2.8 Activate Tenant

    Flow: m·ªü quy·ªÅn s·ª≠ d·ª•ng
    Rule config:

            activate_after_payment: true/false
            activate_trial_immediately
            activation_mode: full | limited
    üëâ ƒê√¢y l√† ƒëi·ªÉm cu·ªëi, kh√¥ng quay ng∆∞·ª£c flow
   
K·∫øt lu·∫≠n chu·∫©n ki·∫øn tr√∫c

Flow = code c·ªë ƒë·ªãnh (x∆∞∆°ng s·ªëng SaaS)
Rule = config (b·∫≠t/t·∫Øt, ch·ªçn nh√°nh)
Admin ch·ªâ ch·∫°m rule, kh√¥ng ch·∫°m flow


3. Nh√≥m DTO cho AUTH (Signup / Verify / Signin)

    3.1 SignupCommand
        SignupCommand
            - email
            - password
            - source (web, api)

    3.2 SignupResult
        SignupResult
            - user_id
            - verify_required (bool)

    3.3 VerifyEmailCommand
        VerifyEmailCommand
            - user_id
            - token
    3.4 VerifyEmailResult
        VerifyEmailResult
        - verified (bool)

    3.5 SigninCommand
        SigninCommand
            - user_id (or email)
    3.6 SigninResult
        SigninResult
            - user_id
            - session_id

4. Nh√≥m DTO cho TENANT (Project)
    4.1 CreateTenantCommand
        CreateTenantCommand
            - owner_user_id
            - tenant_name

    4.2 CreateTenantResult
        CreateTenantResult
            - tenant_id
            - status (pending | inactive)

5. Nh√≥m DTO cho SUBSCRIPTION / PLAN
    5.1 ResolveSubscriptionCommand
        ResolveSubscriptionCommand
            - tenant_id

    5.2 ResolveSubscriptionResult
        ResolveSubscriptionResult
            - status (free | trial | active)
            - trial_days

    5.3 AssignPlanCommand
        AssignPlanCommand
            - tenant_id
            - plan_code

    5.4 AssignPlanResult
        AssignPlanResult
            - plan_code
            - requires_payment (bool)

6. Nh√≥m DTO cho BILLING
    6.1 CreateQuoteCommand
        CreateQuoteCommand
        - tenant_id
        - plan_code

    6.2 CreateQuoteResult
        CreateQuoteResult
            - quote_id
            - amount
            - currency
    6.3 ChargePaymentCommand
        ChargePaymentCommand
            - quote_id
            - payment_method

    6.4 ChargePaymentResult
        ChargePaymentResult
            - success (bool)
            - transaction_id

7. Nh√≥m DTO cho ACTIVATE
    7.1 ActivateTenantCommand
        ActivateTenantCommand
        - tenant_id

    7.2 ActivateTenantResult
        ActivateTenantResult
            - status (active | limited)
8. DTO ‚Äúxuy√™n su·ªët flow‚Äù (Application-level)
    ProvisioningContext (optional nh∆∞ng r·∫•t chu·∫©n)
        ProvisioningContext
            - user_id
            - tenant_id
            - plan_code
            - subscription_status

üëâ Application flow gi·ªØ context n√†y, kh√¥ng ph·∫£i module.

